{% extends "base.html" %}

{% block title %}Welcome - THE NATIONAL SCAFFOLDING{% endblock %}

{% block content %}
<!-- Welcome Popup -->
<div id="welcomePopup" class="welcome-popup">
    <div class="welcome-content">
        <h1>Welcome to THE NATIONAL SCAFFOLDING</h1>
        <p>We don't just build scaffolds â€” we build confidence. Explore our premium scaffolding and fabrication products for all your construction needs.</p>
        <div class="popup-buttons">
            <button class="btn-explore" onclick="closeWelcome()">Continue to Explore</button>
            {% if not current_user.is_authenticated %}
            <button class="btn-login" onclick="window.location.href='{{ url_for('login') }}'">Login / Register</button>
            {% endif %}
        </div>
    </div>
</div>

<div class="landing-page">
    <div class="landing-container">
        <h1 class="landing-title">Welcome to The National Scaffolding</h1>
        <p class="landing-subtitle">Choose a category to explore our products</p>
        
        <div class="category-cards">
            <div class="category-card" onclick="window.location.href='{{ url_for('national_scaffoldings') }}'">
                <div class="card-content">
                    <h2>National Scaffolding</h2>
                    <p>Professional scaffolding services for all your construction needs</p>
                    <button class="card-btn">Explore Scaffolding</button>
                </div>
            </div>
            
            <div class="category-card" onclick="window.location.href='{{ url_for('fabrications') }}'">
                <div class="card-content">
                    <h2>Fabrications</h2>
                    <p>Custom fabrication products including furniture and more</p>
                    <button class="card-btn">Explore Fabrications</button>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
// Show welcome popup only for non-logged-in users
window.addEventListener('DOMContentLoaded', () => {
    const popup = document.getElementById('welcomePopup');
    const isLoggedIn = {{ 'true' if current_user.is_authenticated else 'false' }};
    
    if (isLoggedIn) {
        // Never show popup for logged-in users
        popup.style.display = 'none';
        document.body.classList.remove('popup-active');
    } else {
        // Show popup for non-logged-in users (only once per session)
        const popupShown = sessionStorage.getItem('welcomeShown');
        
        if (popupShown) {
            popup.style.display = 'none';
            document.body.classList.remove('popup-active');
        } else {
            // Show popup immediately with blur effect
            popup.style.display = 'flex';
            document.body.classList.add('popup-active');
        }
    }
});

function closeWelcome() {
    document.getElementById('welcomePopup').style.display = 'none';
    document.body.classList.remove('popup-active');
    sessionStorage.setItem('welcomeShown', 'true');
}
</script>
{% endblock %}
